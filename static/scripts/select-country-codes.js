var countries = [
  { label: "Afganistan", value: 93, countryCode: "AF" },
  { label: "Albania", value: 355, countryCode: "AL" },
  { label: "Algieria", value: 213, countryCode: "DZ" },
  { label: "Andora", value: 376, countryCode: "AD" },
  { label: "Angola", value: 244, countryCode: "AO" },
  { label: "Antigua i Barbuda", value: 1268, countryCode: "AG" },
  { label: "Argentyna", value: 54, countryCode: "AR" },
  { label: "Armenia", value: 374, countryCode: "AM" },
  { label: "Australia", value: 61, countryCode: "AU" },
  { label: "Austria", value: 43, countryCode: "AT" },
  { label: "Azerbejdżan", value: 994, countryCode: "AZ" },
  { label: "Bahamy", value: 1242, countryCode: "BS" },
  { label: "Bahrajn", value: 973, countryCode: "BH" },
  { label: "Bangladesz", value: 880, countryCode: "BD" },
  { label: "Barbados", value: 1246, countryCode: "BB" },
  { label: "Belgia", value: 32, countryCode: "BE" },
  { label: "Belize", value: 501, countryCode: "BZ" },
  { label: "Benin", value: 229, countryCode: "BJ" },
  { label: "Bhutan", value: 975, countryCode: "BT" },
  { label: "Białoruś", value: 375, countryCode: "BY" },
  { label: "Birma", value: 95, countryCode: "MM" },
  { label: "Boliwia", value: 591, countryCode: "BO" },
  { label: "Bośnia i Hercegowina", value: 387, countryCode: "BA" },
  { label: "Botswana", value: 267, countryCode: "BW" },
  { label: "Brazylia", value: 55, countryCode: "BR" },
  { label: "Brunei", value: 673, countryCode: "BN" },
  { label: "Bułgaria", value: 359, countryCode: "BG" },
  { label: "Burkina Faso", value: 226, countryCode: "BF" },
  { label: "Burundi", value: 257, countryCode: "BI" },
  { label: "Chile", value: 56, countryCode: "CL" },
  { label: "Chiny", value: 86, countryCode: "CN" },
  { label: "Chorwacja", value: 385, countryCode: "HR" },
  { label: "Cypr", value: 357, countryCode: "CY" },
  { label: "Czarnogóra", value: 382, countryCode: "ME" },
  { label: "Czechy", value: 420, countryCode: "CZ" },
  { label: "Dania", value: 45, countryCode: "DK" },
  { label: "Dominika", value: 1767, countryCode: "DM" },
  { label: "Dominikana", value: 1809, countryCode: "DO" },
  { label: "Dżibuti", value: 253, countryCode: "DJ" },
  { label: "Egipt", value: 20, countryCode: "EG" },
  { label: "Ekwador", value: 593, countryCode: "EC" },
  { label: "Erytrea", value: 291, countryCode: "ER" },
  { label: "Estonia", value: 372, countryCode: "EE" },
  { label: "Eswatini", value: 268, countryCode: "SZ" },
  { label: "Etiopia", value: 251, countryCode: "ET" },
  { label: "Fidżi", value: 679, countryCode: "FJ" },
  { label: "Filipiny", value: 63, countryCode: "PH" },
  { label: "Finlandia", value: 358, countryCode: "FI" },
  { label: "Francja", value: 33, countryCode: "FR" },
  { label: "Gabon", value: 241, countryCode: "GA" },
  { label: "Gambia", value: 220, countryCode: "GM" },
  { label: "Ghana", value: 233, countryCode: "GH" },
  { label: "Grecja", value: 30, countryCode: "GR" },
  { label: "Grenada", value: 1473, countryCode: "GD" },
  { label: "Gruzja", value: 995, countryCode: "GE" },
  { label: "Gujana", value: 592, countryCode: "GY" },
  { label: "Gwatemala", value: 502, countryCode: "GT" },
  { label: "Gwinea", value: 224, countryCode: "GN" },
  { label: "Gwinea Bissau", value: 245, countryCode: "GW" },
  { label: "Gwinea Równikowa", value: 240, countryCode: "GQ" },
  { label: "Haiti", value: 509, countryCode: "HT" },
  { label: "Hiszpania", value: 34, countryCode: "ES" },
  { label: "Holandia", value: 31, countryCode: "NL" },
  { label: "Honduras", value: 504, countryCode: "HN" },
  { label: "Indie", value: 91, countryCode: "IN" },
  { label: "Indonezja", value: 62, countryCode: "ID" },
  { label: "Irak", value: 964, countryCode: "IQ" },
  { label: "Iran", value: 98, countryCode: "IR" },
  { label: "Irlandia", value: 353, countryCode: "IE" },
  { label: "Islandia", value: 354, countryCode: "IS" },
  { label: "Izrael", value: 972, countryCode: "IL" },
  { label: "Jamajka", value: 1876, countryCode: "JM" },
  { label: "Japonia", value: 81, countryCode: "JP" },
  { label: "Jemen", value: 967, countryCode: "YE" },
  { label: "Jordania", value: 962, countryCode: "JO" },
  { label: "Kajmany", value: 1345, countryCode: "KY" },
  { label: "Kambodża", value: 855, countryCode: "KH" },
  { label: "Kamerun", value: 237, countryCode: "CM" },
  { label: "Kanada", value: 1, countryCode: "CA" },
  { label: "Katar", value: 974, countryCode: "QA" },
  { label: "Kazachstan", value: 7, countryCode: "KZ" },
  { label: "Kenia", value: 254, countryCode: "KE" },
  { label: "Kirgistan", value: 996, countryCode: "KG" },
  { label: "Kiribati", value: 686, countryCode: "KI" },
  { label: "Kolumbia", value: 57, countryCode: "CO" },
  { label: "Komory", value: 269, countryCode: "KM" },
  { label: "Kongo (DRK)", value: 243, countryCode: "CD" },
  { label: "Kongo (Republika)", value: 242, countryCode: "CG" },
  { label: "Korea Północna", value: 850, countryCode: "KP" },
  { label: "Korea Południowa", value: 82, countryCode: "KR" },
  { label: "Kostaryka", value: 506, countryCode: "CR" },
  { label: "Kuba", value: 53, countryCode: "CU" },
  { label: "Kuwejt", value: 965, countryCode: "KW" },
  { label: "Laos", value: 856, countryCode: "LA" },
  { label: "Lesotho", value: 266, countryCode: "LS" },
  { label: "Liban", value: 961, countryCode: "LB" },
  { label: "Liberia", value: 231, countryCode: "LR" },
  { label: "Libia", value: 218, countryCode: "LY" },
  { label: "Liechtenstein", value: 423, countryCode: "LI" },
  { label: "Litwa", value: 370, countryCode: "LT" },
  { label: "Luksemburg", value: 352, countryCode: "LU" },
  { label: "Łotwa", value: 371, countryCode: "LV" },
  { label: "Macedonia Północna", value: 389, countryCode: "MK" },
  { label: "Madagaskar", value: 261, countryCode: "MG" },
  { label: "Malawi", value: 265, countryCode: "MW" },
  { label: "Malediwy", value: 960, countryCode: "MV" },
  { label: "Malezja", value: 60, countryCode: "MY" },
  { label: "Mali", value: 223, countryCode: "ML" },
  { label: "Malta", value: 356, countryCode: "MT" },
  { label: "Man, Wyspa", value: 441624, countryCode: "IM" },
  { label: "Maroko", value: 212, countryCode: "MA" },
  { label: "Mariany Północne", value: 1670, countryCode: "MP" },
  { label: "Martynika", value: 596, countryCode: "MQ" },
  { label: "Mauretania", value: 222, countryCode: "MR" },
  { label: "Mauritius", value: 230, countryCode: "MU" },
  { label: "Meksyk", value: 52, countryCode: "MX" },
  { label: "Mikronezja", value: 691, countryCode: "FM" },
  { label: "Mjanma", value: 95, countryCode: "MM" },
  { label: "Mołdawia", value: 373, countryCode: "MD" },
  { label: "Monako", value: 377, countryCode: "MC" },
  { label: "Mongolia", value: 976, countryCode: "MN" },
  { label: "Montserrat", value: 1664, countryCode: "MS" },
  { label: "Mozambik", value: 258, countryCode: "MZ" },
  { label: "Namibia", value: 264, countryCode: "NA" },
  { label: "Nauru", value: 674, countryCode: "NR" },
  { label: "Nepal", value: 977, countryCode: "NP" },
  { label: "Niemcy", value: 49, countryCode: "DE" },
  { label: "Niger", value: 227, countryCode: "NE" },
  { label: "Nigeria", value: 234, countryCode: "NG" },
  { label: "Nikaragua", value: 505, countryCode: "NI" },
  { label: "Norwegia", value: 47, countryCode: "NO" },
  { label: "Nowa Zelandia", value: 64, countryCode: "NZ" },
  { label: "Oman", value: 968, countryCode: "OM" },
  { label: "Pakistan", value: 92, countryCode: "PK" },
  { label: "Palau", value: 680, countryCode: "PW" },
  { label: "Panama", value: 507, countryCode: "PA" },
  { label: "Papua-Nowa Gwinea", value: 675, countryCode: "PG" },
  { label: "Paragwaj", value: 595, countryCode: "PY" },
  { label: "Peru", value: 51, countryCode: "PE" },
  { label: "Polska", value: 48, countryCode: "PL" },
  { label: "Portugalia", value: 351, countryCode: "PT" },
  { label: "Republika Południowej Afryki", value: 27, countryCode: "ZA" },
  { label: "Republika Środkowoafrykańska", value: 236, countryCode: "CF" },
  { label: "Republika Zielonego Przylądka", value: 238, countryCode: "CV" },
  { label: "Rosja", value: 7, countryCode: "RU" },
  { label: "Rumunia", value: 40, countryCode: "RO" },
  { label: "Rwanda", value: 250, countryCode: "RW" },
  { label: "Salwador", value: 503, countryCode: "SV" },
  { label: "Samoa", value: 685, countryCode: "WS" },
  { label: "San Marino", value: 378, countryCode: "SM" },
  { label: "Senegal", value: 221, countryCode: "SN" },
  { label: "Serbia", value: 381, countryCode: "RS" },
  { label: "Seszele", value: 248, countryCode: "SC" },
  { label: "Sierra Leone", value: 232, countryCode: "SL" },
  { label: "Singapur", value: 65, countryCode: "SG" },
  { label: "Słowacja", value: 421, countryCode: "SK" },
  { label: "Słowenia", value: 386, countryCode: "SI" },
  { label: "Somalia", value: 252, countryCode: "SO" },
  { label: "Sri Lanka", value: 94, countryCode: "LK" },
  { label: "Stany Zjednoczone", value: 1, countryCode: "US" },
  { label: "Suazi", value: 268, countryCode: "SZ" },
  { label: "Sudan", value: 249, countryCode: "SD" },
  { label: "Sudan Południowy", value: 211, countryCode: "SS" },
  { label: "Surinam", value: 597, countryCode: "SR" },
  { label: "Syria", value: 963, countryCode: "SY" },
  { label: "Szwajcaria", value: 41, countryCode: "CH" },
  { label: "Szwecja", value: 46, countryCode: "SE" },
  { label: "Tadżykistan", value: 992, countryCode: "TJ" },
  { label: "Tajlandia", value: 66, countryCode: "TH" },
  { label: "Tanzania", value: 255, countryCode: "TZ" },
  { label: "Timor Wschodni", value: 670, countryCode: "TL" },
  { label: "Togo", value: 228, countryCode: "TG" },
  { label: "Tonga", value: 676, countryCode: "TO" },
  { label: "Trynidad i Tobago", value: 1868, countryCode: "TT" },
  { label: "Tunezja", value: 216, countryCode: "TN" },
  { label: "Turcja", value: 90, countryCode: "TR" },
  { label: "Turkmenistan", value: 993, countryCode: "TM" },
  { label: "Tuvalu", value: 688, countryCode: "TV" },
  { label: "Uganda", value: 256, countryCode: "UG" },
  { label: "Ukraina", value: 380, countryCode: "UA" },
  { label: "Urugwaj", value: 598, countryCode: "UY" },
  { label: "Uzbekistan", value: 998, countryCode: "UZ" },
  { label: "Vanuatu", value: 678, countryCode: "VU" },
  { label: "Watykan", value: 379, countryCode: "VA" },
  { label: "Wenezuela", value: 58, countryCode: "VE" },
  { label: "Węgry", value: 36, countryCode: "HU" },
  { label: "Wielka Brytania", value: 44, countryCode: "GB" },
  { label: "Wietnam", value: 84, countryCode: "VN" },
  { label: "Włochy", value: 39, countryCode: "IT" },
  { label: "Wybrzeże Kości Słoniowej", value: 225, countryCode: "CI" },
  { label: "Wyspy Bahama", value: 1242, countryCode: "BS" },
  { label: "Wyspy Cooka", value: 682, countryCode: "CK" },
  { label: "Wyspy Marshalla", value: 692, countryCode: "MH" },
  { label: "Wyspy Owcze", value: 298, countryCode: "FO" },
  { label: "Wyspy Świętego Tomasza i Książęca", value: 239, countryCode: "ST" },
  { label: "Zambia", value: 260, countryCode: "ZM" },
  { label: "Zimbabwe", value: 263, countryCode: "ZW" },
  { label: "Zjednoczone Emiraty Arabskie", value: 971, countryCode: "AE" },
];

function getFlagEmoji(countryCode) {
  const codePoints = countryCode
    .toUpperCase()
    .split("")
    .map((char) => 127397 + char.charCodeAt());
  return String.fromCodePoint(...codePoints);
}

function addCountryCodes() {
  var countryCodesDivs = document.querySelectorAll(".country-codes");

  if (!countryCodesDivs) {
    console.error("Div o klasie 'country-codes' nie został znaleziony.");
    return;
  }

  countryCodesDivs.forEach(function (countryCodesDiv) {
    
    // Check if the select element has already been added
    if (countryCodesDiv.querySelector("select[name='countryCode']")) {
      return;
    }

    var defaultCountryCode = countryCodesDiv.getAttribute("data-default-country-code");
    
    var select = document.createElement("select");
    select.name = "countryCode";
    select.className = "form-control";

    // Add options to the select element based on the countries array
    countries.forEach(function (country) {
      var option = document.createElement("option");
      option.value = country.value;
      option.text = `${getFlagEmoji(country.countryCode)} ${country.label} (+${country.value})`;
      select.appendChild(option);
    });

    select.value = parseInt(defaultCountryCode);

    countryCodesDiv.appendChild(select);
  });
}

document.addEventListener("DOMContentLoaded", addCountryCodes);
